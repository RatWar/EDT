<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 11.00.10570.1001"></meta></head><body>
<div class="detail-text" style="BOX-SIZING: border-box; FONT-SIZE: 15px; OVERFLOW: hidden; FONT-FAMILY: Verdana, Arial, Helvetica, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; LINE-HEIGHT: 1.5em; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial">
<div style="BOX-SIZING: border-box">
<div style="BOX-SIZING: border-box">
<div style="BOX-SIZING: border-box">
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">Возможности первой версии</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">В начале, напишу кратко, что умеет первая версия:</p>
<ul style="BOX-SIZING: border-box; MARGIN-BOTTOM: 10px; MARGIN-TOP: 0px"><li style="BOX-SIZING: border-box">базовый функционал (редактирование запросов, исполнение, сохранение в файл, работа с параметрами, и т.д.) 
</li><li style="BOX-SIZING: border-box">полноценная работа в режиме управляемых форм в режиме толстого и тонкого клиента 
</li><li style="BOX-SIZING: border-box">поддержка всех типов 1С, в том числе момента времени, границы, уникального идентификатора, типа «Тип», вида движений, таблиц значений (табличные части), и т.д. 
</li><li style="BOX-SIZING: border-box">поддержка списков, массивов, таблиц значений в параметрах, удобное их редактирование 
</li><li style="BOX-SIZING: border-box">перехват любых запросов из отладчика вместе с параметрами и временными таблицами 
</li><li style="BOX-SIZING: border-box">возможность получения всех результатов запроса («ВыполнитьПакет») 
</li><li style="BOX-SIZING: border-box">просмотр перехваченных временных таблиц, изменение их данных для отладки запроса 
</li><li style="BOX-SIZING: border-box">перехват через функцию БСП ЗапросВСтрокуXML 
</li><li style="BOX-SIZING: border-box">вывод результата в виде таблицы, дерева, а так же в табличный документ 
</li><li style="BOX-SIZING: border-box">работает при запрете синхронных методов (использует только асинхронные методы клиента) 
</li><li style="BOX-SIZING: border-box">отладка запросов, получающих большое количество данных: два варианта ограничения количества строк в режиме отладки 
</li><li style="BOX-SIZING: border-box">сохранение комментариев в запросах после конструктора 
</li><li style="BOX-SIZING: border-box">запоминает последний  файл, с которым производилась работа</li></ul><p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Как видим, в первой версии есть все базовые возможности, необходимые для работы. Из функций, которых мне не хватает как разработчику в первой версии - это обработка результата запроса кодом. Это будет во второй версии.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Ну а дальше пройдем по всем возможностям немного подробнее.</p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">Базовый функционал, главное окно</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Организация основного рабочего пространства основывается на эргономике, как я ее понимаю. Необходимо, что бы все самое главное было под рукой. Основная часть работы – это редактирование запроса и просмотр результата. Поэтому, фактически, экран разделен на две основные части – текст запроса и результат. Причем результату нужно отдавать максимально возможную ширину экрана, ее всегда не хватает. Тексту запроса хватит меньшей ширины, поэтому рядом с ним расположилось вспомогательное окошко с деревом запросов и опциями. Параметры и временные таблицы «живут» в том же окне, что и запрос. В общем, получился классический вид, какой имела самая первая консоль запросов времен 1С 8.0. Границы между окнами, естественно, можно двигать.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><br style="BOX-SIZING: border-box"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 567px; BORDER-RIGHT: 0px; WIDTH: 1024px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000" src="https://infostart.ru/upload/iblock/d0c/d0c4fd9c8796b65928dd9fc2e6c39b58.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">Редактирование текста запроса</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Тут все стандартно. Обработка текста: добавить/удалить комментарии, добавить/удалить перенос строки. Есть команды вызова конструктора, синтаксического контроля и форматирования. Команда форматирования обрабатывает текст примерно так же, как делает это конструктор запросов. Наверное, многие после ручного редактирования вызывают конструктор без сохранения для контроля синтаксиса, или с сохранением для форматирования. В этой консоли для этого не нужно вызывать конструктор, для этого есть отдельные команды со своими горячими клавишами. Вообще, стоит отметить, что все команды и здесь, и вообще везде во всей консоли запросов имеют горячие клавиши, которые совпадают, по возможности, с общепринятыми.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Стоит отдельно отметить три команды для перехвата запросов из отладчика. Одна из них такая-же, как и в типовой консоли запросов - "Заполнить из XML". Для ее использования нужно в отладчике выполнить функцию БСП ЗапросВСтрокуXML(Запрос), получившийся результат скопировать в поле текста запроса и выполнить команду "Заполнить из XML". При этом в консоль будет перенесен текст запроса, и все параметры запроса. Но временные таблицы перенесены не будут, поэтому лучше пользоваться другим способом, он описан подробно далее, в разделе, посвященном перехвату запросов.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 431px; BORDER-RIGHT: 0px; WIDTH: 742px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - текст запроса" src="https://infostart.ru/upload/iblock/d77/d77aa57faae001645b086d460761e191.png"></img></p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal"> </h2>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">Параметры</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">На закладке параметров можно увидеть три колонки – имя, тип и значение. Рядом с типом находится иконка, обозначающая тип контейнера – одиночное значение, список, массив, или таблица значений.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 661px; BORDER-RIGHT: 0px; WIDTH: 895px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - список параметров" src="https://infostart.ru/upload/iblock/756/756b4011b1bc78ad645eadafa87f2df2.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Параметры можно загрузить из запроса или добавить вручную. При изменении типа параметра, делается попытка преобразовать один тип в другой, если это возможно. Например,  число всегда преобразовывается в строку. Наоборот – если преобразование возможно. Если преобразовать одиночное значение в массив или список, старое значение окажется в этом списке. Большинство значений в параметры вводятся непосредственно, но для некоторых значений открывается форма редактирования. Например, граница, момент времени, уникальный идентификатор.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 561px; BORDER-RIGHT: 0px; WIDTH: 627px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="" src="https://infostart.ru/upload/iblock/c5b/c5bff19cdfc7f1b0440ad8c1890878f3.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">В первых двух формах понятно все без комментариев. В форме уникального идентификатора можно задать идентификатор непосредственно (строкой), а так же выбором ссылочного значения из базы данных. При выборе значения мы сразу увидим его идентификатор. А если указать идентификатор и нажать кнопку поиска, по нему будет найдено значение. Таким образом, это окошко можно использовать, что бы узнать идентификатор ссылки, а так же наоборот - что бы по уникальному идентификатору найти объект в базе.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Окно выбора типа выглядит так:</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 801px; BORDER-RIGHT: 0px; WIDTH: 886px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - редактирование типа" src="https://infostart.ru/upload/iblock/570/570cec2b839eb9102b1470ee66697e29.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Если выбрать тип контейнера «список» или «массив», то невозможно задать некоторые типы, такие как «момент времени» или «граница». Но, если честно, я не могу представить ситуацию, когда необходимо передать в запрос массив моментов или границ. Это одно из немногих ограничений консоли по работе с типами.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Если указать тип контейнера «Таблица значений», то произойдет переключение в режим редактирования структуры таблицы.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 343px; BORDER-RIGHT: 0px; WIDTH: 562px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - редактирование структуры таблицы в параметрах" src="https://infostart.ru/upload/iblock/ccc/ccca8ef63012cbabdb4055b404f99281.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">После задания структуры таблицы, так же просто можно заполнить содержимое.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 797px; BORDER-RIGHT: 0px; WIDTH: 886px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - редактирование таблицы в параметрах" src="https://infostart.ru/upload/iblock/497/49764445013308a5b8a332b6a00013dd.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Похожим способом способом задается содержимое массивов и списков.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 820px; BORDER-RIGHT: 0px; WIDTH: 1168px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - подбор в список" src="https://infostart.ru/upload/iblock/e1e/e1e6568fe5e141b2a68276e26b900c0a.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">Вывод результатов запроса</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">На мой взгляд, с результатами запроса при его отладке удобнее всего работать с помощью таблицы или дерева. Но, почему-то, большинство консолей на управляемых формах позволяют выводить результат только в табличный документ. Консоль запросов 9000 делает базовый вывод в таблицу или дерево, и дополнительно есть возможность вывести результат в табличный документ в отдельное окно.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Есть возможность выбрать любой результат в пакетном запросе, а так же сделать ограничение для вывода строк. Присутствуют стандартные возможности - поиск и вывод в список. Результат, выведенный в табличный документ можно сохранить в формате, поддерживаемом 1С для табличного документа (mxl, Excel, Word, pdf, и т.д.).</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 333px; BORDER-RIGHT: 0px; WIDTH: 1103px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - вывод результата" src="https://infostart.ru/upload/iblock/21e/21e521192cec9ddfe2bf3a8afdcf081f.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">На ограничении вывода результата стоит остановиться отдельно. Консоль позволяет ограничить вывод двумя различными способами. Первый способ - это установка значения "ПЕРВЫЕ" рядом с кнопкой "Выполнить". В этом случае перед выполнением запроса в него добавиться "ПЕРВЫЕ" во все пакеты, за исключением формирования временных таблиц. Этот способ подходит для отладки очень тяжелых запросов, в которых получение данных занимает значительное время. Можно отладить запрос на небольшом количестве строк, не ожидая каждый раз выполнения запроса над всем массивом данных. С использованием этого варианта ограничения есть небольшой нюанс - при ошибке в запросе курсор может немного не точно позиционироваться в место ошибки. Возможно, удастся это победить в следующих версиях.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Второй способ ограничения строк результата - на скрине выше. В этом случае происходит получение всего набора данных, но ограничивается лишь вывод в таблицу результата. Заданное таким образом ограничение строк и вид результата можно в любой момент изменить, при этом мы сразу увидим изменения в окне результата, но запрос повторно выполняться не будет - будут выведены уже полученные данные.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">При клике на ячейку в результате открывается соответствующее значение или его представление. Например, для ссылки справочника или документа откроется соответствующий элемент справочника или документ. В результате запроса поддерживаются даже такие типы, как подзапрос. Их содержимое так же можно просмотреть, кликнув на ячейку. Они открываются, как вложенная таблица значений.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 771px; BORDER-RIGHT: 0px; WIDTH: 1056px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - открытие таблицы значений из результата запроса" src="https://infostart.ru/upload/iblock/052/052a85cd5a0cf51c0c21ada8c2953c6f.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">Перехват запросов в отладчике</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Перехват запросов осуществляется максимально просто. Для этого выбираем меню для получения кода, и копируем в буфер обмена. Кстати, горячая кнопка для этого меню - Shift+F9. Код для Shift+F9 получаем по Shift+F9 :)</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 538px; BORDER-RIGHT: 0px; WIDTH: 1024px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - код для перехвата запросов" src="https://infostart.ru/upload/iblock/bfc/bfc27fc12284e2edbd6256f819bdc4e3.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">После этого в отладчике, на точке останова выполняем этот код, вызвав "Вычислить выражение" (Shift+F9). У пользователя, под которым делаем перехват запросов, должна быть отключена защита от опасных действий. Не забываем исправить имя переменной, содержащей запрос. И еще один важный момент - перехват нужно осуществить<span> </span><strong style="BOX-SIZING: border-box; FONT-WEIGHT: 700">ДО</strong><span> </span>выполнения запроса. В противном случае запрос может создать временные таблицы, и его не удастся сразу выполнить в консоли - будет ошибка при создании временных таблиц с одинаковым именем. Если все же вы совершили такую ошибку, и перехватили запрос после его выполнения, необходимо создаваемые им временные таблицы удалить в консоли вручную. Это можно сделать на закладке "Менеджер временных таблиц", о ней поговорим чуть позже.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 712px; BORDER-RIGHT: 0px; WIDTH: 1608px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - перехват запроса в отладчике" src="https://infostart.ru/upload/iblock/423/4235dc58d3da8e486342e247cd80b907.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Перехват запросов можно сделать сразу несколько раз. К примеру, на скрине выше - отражение в регламентированном учете приобретения товаров и услуг, там выполняются почти подряд четыре запроса. Я сделал четыре точки останова и последовательно перехватил запрос на каждой точке. После этого идем в консоль запросов и вызываем там функцию "Получить перехваченные запросы" (Ctrl+F9). Не имеет значения - запущена консоль в этом же сеансе или другом. Важно, что бы это была та же база и тот же пользователь. При вызове этой функции будут загружены все перехваченные запросы.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 605px; BORDER-RIGHT: 0px; WIDTH: 986px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - загрузка перехваченных запросов" src="https://infostart.ru/upload/iblock/11a/11aed471a9fe4eb6439242939f0ba4cf.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">После загрузки перехваченных запросов с ними можно работать точно так же, как и с обычными запросами, созданными вручную. Но одно отличие все же есть - для них загружаются временные таблицы, если они были созданы. Временные таблицы находятся на закладке "Менеджер временных таблиц". Можно открывать и просматривать их содержимое, а так же изменять их данные. Можно изменять даже такие экзотические значения, как значения типа "Тип" или момент времени. Загруженные временные таблицы можно удалять, переименовывать или копировать под другим именем. Структуру загруженных временных таблиц изменять нельзя.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 688px; BORDER-RIGHT: 0px; WIDTH: 1100px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - редактирование данных временной таблицы" src="https://infostart.ru/upload/iblock/eea/eeaaa8e4a550a7a483c025d875327554.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">Сохранение комментариев после конструктора запросов</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Текст запроса - это такой же программный код, как и код встроенного языка. Довольно часто хочется оставить в нем комментарии. Кроме того, комментарии в языке запросов нередко встречаются и в типовых конфигурациях, например ERP. Но вот беда - они полностью теряются, если запрос отредактировать с помощью конструктора. По хорошему, что бы комментарии не терялись, их должен поддерживать конструктор запросов. Но изменить мы его не можем. Поэтому Консоль запросов 9000 пытается сохранить комментарии эвристическими методами. По сути, это напоминает объединение текстов модулей. Просматриваются строки запроса до конструктора и после. При наличии совпадений, комментарии восстанавливаются на тех же местах. Но даже если совпадений нет, комментарии потеряны не будут. Просто они могут оказаться на других местах. Если текст запроса изменится очень сильно - алгоритм поместит такой "потерянный" комментарий в конец текста запроса. При необходимости, сохранение комментариев можно отключить в опциях.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">В общем, попробуем такую эвристику и посмотрим, насколько это будет полезно и удобно.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">Сохранение и автосохранение</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Консоль запросов 9000 придерживается стандартных правил работы с файлом. Например, при выходе она спрашивает, сохранить ли файл, если он был изменен и не сохранен. Такой же вопрос будет задан при нажатии на кнопку "Новый", или при открытии файла.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Существует так же автосохранение. Оно осуществляется с периодом, настраиваемым в опциях, а так же перед выполнением запроса (тоже опционально). Автосохранение происходит в ту же папку, в файл с таким же форматом, что и основной, но с другим расширением. Если в процессе работы происходит сбой, файл автосохранения остается. При открытии основного файла (или автооткрытии в момент запуска) консоль проверяет наличие автосохранения. Если оно найдено - то восстанавливается состояние на момент последнего автосохранения. Данные в консоли будут на момент автосохранения, с признаком модификации, но основной файл запросов при этом изменен не будет. Если нужно вернуться к состоянию основного файла пакета запросов - нужно просто не сохранять данные в консоли после восстановления - например, просто выйти без сохранения. Если же нужно это состояние сохранить, нажимаем "Сохранить" - в общем-то, все просто :)</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Насчет автосохранения стоит отметить один момент. Консоль запросов хранит все данные на клиенте, в данных формы. При сохранении эти данные должны сходить на сервер - у платформы много нюансов работы с данными, и я пока не нашел, как всех их обойти. Поэтому, если в пакете много данных (например, во временных таблицах или в таблицах в параметрах запросов), то в момент автосохранения может создавать ощутимое торможение. В таком случае, возможно, стоит его отключить.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Дальше просто приведу окно опций, там все понятно без комментариев.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 341px; BORDER-RIGHT: 0px; WIDTH: 507px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - опции" src="https://infostart.ru/upload/iblock/c34/c3472a3c637160a9fff618f1a40a8cd4.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<div style="BOX-SIZING: border-box; break-after: page"></div>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">01.03.2020 Продолжение. Версия 1.1.1</h2>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">Кратко об изменениях</h2>
<ul style="BOX-SIZING: border-box; MARGIN-BOTTOM: 10px; MARGIN-TOP: 0px"><li style="BOX-SIZING: border-box">Добавлена возможность просмотра временных таблиц, формируемых запросом. Ранее можно было просмотреть только перехваченные временные таблицы 
</li><li style="BOX-SIZING: border-box">Изменен перехват запросов - теперь есть возможность перехвата фоновых и регламентных заданий, в том числе, запущенных под другим пользователем 
</li><li style="BOX-SIZING: border-box">Добавлена возможность получения в результате запроса уникальных идентификаторов ссылок 
</li><li style="BOX-SIZING: border-box">Множество небольших исправлений в интерфейсе (добавлены иконки типов, кнопок, и др.) 
</li><li style="BOX-SIZING: border-box">Исправлены найденные ошибки</li></ul><p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">А теперь подробнее.</p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">Просмотр временных таблиц, сформированных запросом.</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Тут все просто, привожу только скрин.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 415px; BORDER-RIGHT: 0px; WIDTH: 616px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - временные таблицы" src="https://infostart.ru/upload/iblock/8e2/8e2787665fa4075e18725df269e3da55.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">Перехват запросов</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Перехватывать стало можно запросы любого пользователя, в том числе регламентные и фоновые задания. Правило простое - консоль загрузит все запросы, перехваченные полученной у нее строкой.</p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">Получение уникального идентификатора</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">На самом деле, добавлен механизм макроколонок, с помощью которого можно получать значения, которые не может возвращать запрос. Сейчас консоль умеет получать таким образом только уникальный идентификатор.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Возникает вопрос - зачем это нужно, если можно получить кодом? Да, когда будет добавлена обработка кодом, в ней можно будет сделать все что угодно. Но часто требуется что-то более простое, и хочется сделать быстро и без заморочек. Что бы сказать - вот для этих колонок хочу УИД, и нажать кнопку.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Как это работает. Вместо обычного выражения, для колонки пишем специальное выражение, похожее на параметр. Такое выражение не мешает обычной работе, можно использовать, например, конструктор. Выражение для получения уникального идентификаторы выглядит так:</p>
<p style="BOX-SIZING: border-box; TEXT-ALIGN: center; MARGIN: 0px 0px 10px"><strong style="BOX-SIZING: border-box; FONT-WEIGHT: 700">&amp;__УИД_КолонкаИсточника</strong></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">КолонкаИсточника - это уже существующая в результате колонка. Вот пример запроса, который получает уникальный идентификатор для номенклатуры.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 586px; BORDER-RIGHT: 0px; WIDTH: 1179px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - получение уникального идентификатора" src="https://infostart.ru/upload/iblock/636/6363f36b977c6278d77a0794ee6a369e.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Таким образом, можно получить идентификаторы для нескольких колонок. Важно понимать, что обработка таких колонок производится после получения результата. Поэтому, это неприменимо для временных таблиц. И с таким выражением нельзя производить никаких действий - можно только указать как выражение для колонки.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">При желании, поддержку макроколонок можно отключить - появилась новая настройка в "Опциях".</p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">Некоторые доработки и исправления ошибок</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Значительно переработано окно выбора типа - добавлены иконки, поиск. Устранено не совсем адекватное поведение при смене простого типа на составной, и другие мелочи.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Доработано преобразование массива/списка в таблицу и обратно, а так же редактирование структуры таблицы. Теперь, при преобразованиях не теряются данные (если, конечно позволяют типы колонок). Список попадает в первую колонку созданной таблицы, и наоборот. При редактировании структуры таблицы можно менять имена колонок - данные при этом сохраняются. В общем, данные сохраняются, насколько это возможно.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">02.03.2020 Версия 1.1.2</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Исправление ошибки. При возникновении ошибки в запросе, использующем временные таблицы, пользователю выдавалось сообщение "временная таблица уже существует".</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">07.03.2020 Версия 1.1.3</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Исправлены выявленные ошибки.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Далее по новым возможностям.</p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">Вставка предопределенного значения</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">По нажатию Alt+P или кнопки позволяет вставить предопределенное значение, системное перечисление или ссылку на тип.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 612px; BORDER-RIGHT: 0px; WIDTH: 831px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - Вставка предопределенного" src="https://infostart.ru/upload/iblock/ef1/ef1c2d36de59628ffa0878e5b192c7fc.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">Передача результата запроса в параметр</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Результат запроса можно преобразовать в таблицу значения - параметр.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 689px; BORDER-RIGHT: 0px; WIDTH: 1221px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запроса 9000 - результат запроса в параметр" src="https://infostart.ru/upload/iblock/3ba/3ba937d6dfff3ce77cf3340a9410b167.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">Запрос для создания временной таблицы из параметра - таблицы значений</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Если в качестве параметра используется таблица значений, то в запросе на основе ее создается временная таблица. Можно быстро создать такой подзапрос, нажав на специальную кнопку. Текст созданного подзапроса будет добавлен в конец редактируемого запроса.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 802px; BORDER-RIGHT: 0px; WIDTH: 1265px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - запрос создания временной таблицы из таблицы значений" src="https://infostart.ru/upload/iblock/b25/b250dc7cbab038c225a76bacbcbd21f6.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">31.05.2020 Версия 1.1.5</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Исправлены некоторые ошибки.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Добавлена обработка результата кодом.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 243px; BORDER-RIGHT: 0px; WIDTH: 1194px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - обработка результата кодом, пять вариантов." src="https://infostart.ru/upload/iblock/194/19400be5bcdd6df42e0a9ce45f0210c9.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">10.06.2020 Версия 1.1.6</h2>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<ul style="BOX-SIZING: border-box; MARGIN-BOTTOM: 10px; MARGIN-TOP: 0px"><li style="BOX-SIZING: border-box">Исправлены ошибки, проявляющиеся при выполнении в фоне на некоторых версиях БСП. 
</li><li style="BOX-SIZING: border-box">Добавлена возможность при обработке кодом обращаться к параметрам запроса. Для этого можно использовать переменную<span> </span><em style="BOX-SIZING: border-box">Параметры</em>. 
</li><li style="BOX-SIZING: border-box">Сообщения об ошибках выполнения кода в фоне стали более информативными.</li></ul><p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">16.06.2020 Версия 1.1.7</h2>
<ul style="BOX-SIZING: border-box; MARGIN-BOTTOM: 10px; MARGIN-TOP: 0px"><li style="BOX-SIZING: border-box">Исправлены некоторые ошибки 
</li><li style="BOX-SIZING: border-box">Добавлены миллисекунды во время исполнения запроса (изменение от<span> </span><strong style="BOX-SIZING: border-box; FONT-WEIGHT: 700">kuzyara</strong>) 
</li><li style="BOX-SIZING: border-box">Добавлена генерация кода для исполнения запроса на встроенном языке (с параметрами):</li></ul><p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 731px; BORDER-RIGHT: 0px; WIDTH: 1240px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - генерация кода на встроенном языке" src="https://infostart.ru/upload/iblock/a73/a733f9afc715ce5a2764d8bb92ad95f4.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<h2 style="BOX-SIZING: border-box; FONT-SIZE: 22px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 10px 0px; LETTER-SPACING: 0px; LINE-HEIGHT: normal">27.06.2020 Версия 1.1.8</h2>
<ul style="BOX-SIZING: border-box; MARGIN-BOTTOM: 10px; MARGIN-TOP: 0px"></ul><h3 style="BOX-SIZING: border-box; FONT-SIZE: 19px; FONT-FAMILY: inherit; FONT-WEIGHT: 400; COLOR: ; MARGIN: 10px 0px; DISPLAY: block; LINE-HEIGHT: normal">Изменения в интерфейсе.</h3>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Появилось окно со списком результата запроса (временные таблицы и выборки). Можно увидеть сразу все результаты, количество строк, и время выполнения каждого запроса в пакете. Окно открывается по кнопке слева внизу (см. скрин).</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Так же появилась возможность отобразить параметры запроса рядом с текстом. Вариант размещения параметров управляется так же кнопкой, она находится вверху справа.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 939px; BORDER-RIGHT: 0px; WIDTH: 1155px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - главное окно с результатами запроса и параметрами." src="https://infostart.ru/upload/iblock/9df/9df545309893570b4a782cf3bc1136fd.png"></img></p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"> </p>
<ul style="BOX-SIZING: border-box; MARGIN-BOTTOM: 10px; MARGIN-TOP: 0px"></ul><ul style="BOX-SIZING: border-box; MARGIN-BOTTOM: 10px; MARGIN-TOP: 0px"></ul><h3 style="BOX-SIZING: border-box; FONT-SIZE: 19px; FONT-FAMILY: inherit; FONT-WEIGHT: 400; COLOR: ; MARGIN: 10px 0px; DISPLAY: block; LINE-HEIGHT: normal">Окно помощи в написание кода обработки.</h3>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px">Содержит структуру записи и параметры.</p>
<p style="BOX-SIZING: border-box; MARGIN: 0px 0px 10px"><img style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: 650px; BORDER-RIGHT: 0px; WIDTH: 812px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="Консоль запросов 9000 - обработка кодом" src="https://infostart.ru/upload/iblock/292/292bcad6be2fb60990bd29d73f44d108.png"></img></p></div></div></div></div></body></html>